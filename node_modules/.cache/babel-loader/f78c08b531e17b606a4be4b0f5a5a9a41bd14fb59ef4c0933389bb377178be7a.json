{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gustavo\\\\Desktop\\\\paineldaterra\\\\src\\\\components\\\\MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport L from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  municipio\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  useEffect(() => {\n    // Inicializar o mapa\n    const map = L.map(mapRef.current, {\n      center: [-23.5, -51.5],\n      zoom: 7,\n      scrollWheelZoom: false\n    });\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n\n    // Atualizar o mapa quando o município mudar\n    const updateMap = () => {\n      let geojsonFile = '';\n      if (municipio === 'Paraná') {\n        geojsonFile = '/assets/municipio_escolhaummunicipio.geojson';\n      } else {\n        const formattedMunicipio = municipio.toLowerCase().replace(/ /g, '_');\n        console.log('mapa: ', formattedMunicipio);\n        geojsonFile = `/assets/municipio_${formattedMunicipio}.geojson`;\n      }\n      d3.json(geojsonFile).then(geojsonData => {\n        // Remove o GeoJSON existente antes de adicionar o novo\n        map.eachLayer(layer => {\n          if (layer instanceof L.GeoJSON) {\n            map.removeLayer(layer);\n          }\n        });\n        L.geoJSON(geojsonData).addTo(map);\n        map.fitBounds(L.geoJSON(geojsonData).getBounds()); // Ajusta o zoom para se ajustar aos limites do GeoJSON\n      }).catch(error => {\n        console.error('Erro ao carregar o arquivo GeoJSON:', error);\n      });\n    };\n    updateMap();\n\n    // Redimensionar o mapa ao alterar o tamanho da janela\n    window.addEventListener('resize', updateMap);\n    return () => {\n      map.remove();\n      window.removeEventListener('resize', updateMap);\n    };\n  }, [municipio]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    id: \"map\",\n    className: \"map-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 12\n  }, this);\n};\n_s(MapComponent, \"9mn7MMe4fPaZ50ApsOpRWF2HbFg=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","d3","L","jsxDEV","_jsxDEV","MapComponent","municipio","_s","mapRef","map","current","center","zoom","scrollWheelZoom","tileLayer","attribution","addTo","updateMap","geojsonFile","formattedMunicipio","toLowerCase","replace","console","log","json","then","geojsonData","eachLayer","layer","GeoJSON","removeLayer","geoJSON","fitBounds","getBounds","catch","error","window","addEventListener","remove","removeEventListener","ref","id","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Gustavo/Desktop/paineldaterra/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport L from 'leaflet';\r\n\r\nconst MapComponent = ({ municipio }) => {\r\n    const mapRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Inicializar o mapa\r\n        const map = L.map(mapRef.current, {\r\n            center: [-23.5, -51.5],\r\n            zoom: 7,\r\n            scrollWheelZoom: false,\r\n        });\r\n\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: '© OpenStreetMap contributors',\r\n        }).addTo(map);\r\n\r\n        // Atualizar o mapa quando o município mudar\r\n        const updateMap = () => {\r\n            let geojsonFile = '';\r\n            if (municipio === 'Paraná') {\r\n                geojsonFile = '/assets/municipio_escolhaummunicipio.geojson';\r\n            } else {\r\n                const formattedMunicipio = municipio.toLowerCase().replace(/ /g, '_');\r\n                console.log('mapa: ', formattedMunicipio);\r\n                geojsonFile = `/assets/municipio_${formattedMunicipio}.geojson`;\r\n            }\r\n\r\n            d3.json(geojsonFile).then(geojsonData => {\r\n                // Remove o GeoJSON existente antes de adicionar o novo\r\n                map.eachLayer(layer => {\r\n                    if (layer instanceof L.GeoJSON) {\r\n                        map.removeLayer(layer);\r\n                    }\r\n                });\r\n\r\n                L.geoJSON(geojsonData).addTo(map);\r\n                map.fitBounds(L.geoJSON(geojsonData).getBounds()); // Ajusta o zoom para se ajustar aos limites do GeoJSON\r\n            }).catch(error => {\r\n                console.error('Erro ao carregar o arquivo GeoJSON:', error);\r\n            });\r\n        };\r\n\r\n        updateMap();\r\n\r\n        // Redimensionar o mapa ao alterar o tamanho da janela\r\n        window.addEventListener('resize', updateMap);\r\n\r\n        return () => {\r\n            map.remove();\r\n            window.removeEventListener('resize', updateMap);\r\n        };\r\n    }, [municipio]);\r\n\r\n    return <div ref={mapRef} id=\"map\" className=\"map-container\"></div>;\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAO,KAAKC,EAAE,MAAM,IAAI;AACxB,OAAOC,CAAC,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExB,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAU,CAAC,KAAK;EAAAC,EAAA;EACpC,MAAMC,MAAM,GAAGR,MAAM,CAAC,IAAI,CAAC;EAE3BD,SAAS,CAAC,MAAM;IACZ;IACA,MAAMU,GAAG,GAAGP,CAAC,CAACO,GAAG,CAACD,MAAM,CAACE,OAAO,EAAE;MAC9BC,MAAM,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;MACtBC,IAAI,EAAE,CAAC;MACPC,eAAe,EAAE;IACrB,CAAC,CAAC;IAEFX,CAAC,CAACY,SAAS,CAAC,oDAAoD,EAAE;MAC9DC,WAAW,EAAE;IACjB,CAAC,CAAC,CAACC,KAAK,CAACP,GAAG,CAAC;;IAEb;IACA,MAAMQ,SAAS,GAAGA,CAAA,KAAM;MACpB,IAAIC,WAAW,GAAG,EAAE;MACpB,IAAIZ,SAAS,KAAK,QAAQ,EAAE;QACxBY,WAAW,GAAG,8CAA8C;MAChE,CAAC,MAAM;QACH,MAAMC,kBAAkB,GAAGb,SAAS,CAACc,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;QACrEC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEJ,kBAAkB,CAAC;QACzCD,WAAW,GAAG,qBAAqBC,kBAAkB,UAAU;MACnE;MAEAlB,EAAE,CAACuB,IAAI,CAACN,WAAW,CAAC,CAACO,IAAI,CAACC,WAAW,IAAI;QACrC;QACAjB,GAAG,CAACkB,SAAS,CAACC,KAAK,IAAI;UACnB,IAAIA,KAAK,YAAY1B,CAAC,CAAC2B,OAAO,EAAE;YAC5BpB,GAAG,CAACqB,WAAW,CAACF,KAAK,CAAC;UAC1B;QACJ,CAAC,CAAC;QAEF1B,CAAC,CAAC6B,OAAO,CAACL,WAAW,CAAC,CAACV,KAAK,CAACP,GAAG,CAAC;QACjCA,GAAG,CAACuB,SAAS,CAAC9B,CAAC,CAAC6B,OAAO,CAACL,WAAW,CAAC,CAACO,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACvD,CAAC,CAAC,CAACC,KAAK,CAACC,KAAK,IAAI;QACdb,OAAO,CAACa,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC/D,CAAC,CAAC;IACN,CAAC;IAEDlB,SAAS,CAAC,CAAC;;IAEX;IACAmB,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEpB,SAAS,CAAC;IAE5C,OAAO,MAAM;MACTR,GAAG,CAAC6B,MAAM,CAAC,CAAC;MACZF,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAEtB,SAAS,CAAC;IACnD,CAAC;EACL,CAAC,EAAE,CAACX,SAAS,CAAC,CAAC;EAEf,oBAAOF,OAAA;IAAKoC,GAAG,EAAEhC,MAAO;IAACiC,EAAE,EAAC,KAAK;IAACC,SAAS,EAAC;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACtE,CAAC;AAACvC,EAAA,CArDIF,YAAY;AAAA0C,EAAA,GAAZ1C,YAAY;AAuDlB,eAAeA,YAAY;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}