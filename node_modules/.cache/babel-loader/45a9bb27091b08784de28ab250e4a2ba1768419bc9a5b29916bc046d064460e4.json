{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gustavo\\\\Desktop\\\\paineldaterra\\\\src\\\\components\\\\MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css'; // Importar CSS do Leaflet\n\n// Função para remover acentuação, espaços e converter para minúsculas\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst normalizeMunicipioName = name => {\n  return name.normalize('NFD') // Normaliza o texto para decompô-lo\n  .replace(/[\\u0300-\\u036f]/g, '') // Remove os acentos\n  .toLowerCase() // Converte para minúsculas\n  .replace(/ /g, '_'); // Substitui espaços por underscores\n};\nconst MapComponent = ({\n  municipio\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  useEffect(() => {\n    // Inicializar o mapa\n    console.log('Container do mapa:', mapRef.current);\n    const map = L.map(mapRef.current, {\n      center: [-23.5, -51.5],\n      zoom: 7,\n      scrollWheelZoom: true,\n      zoomControl: true\n    });\n    const areEqualStrings = (str1, str2) => {\n      return str1.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase() === str2.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n    };\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n    const updateMap = () => {\n      let geojsonFile = '';\n      municipio = municipio.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\");\n      console.log('Municipio: ', municipio);\n      //if (municipio === 'Paraná') {\n      if (areEqualStrings(municipio, \"Paraná\")) {\n        geojsonFile = '/assets/municipio_escolhaummunicipio.geojson';\n      } else {\n        const formattedMunicipio = normalizeMunicipioName(municipio);\n        geojsonFile = `/assets/municipio_${formattedMunicipio}.geojson`;\n      }\n      console.log('A carregar:', geojsonFile);\n      d3.json(geojsonFile).then(geojsonData => {\n        console.log('Dados GeoJSON carregados:', geojsonData);\n\n        // Remove o GeoJSON existente antes de adicionar o novo\n        map.eachLayer(layer => {\n          if (layer instanceof L.GeoJSON) {\n            map.removeLayer(layer);\n          }\n        });\n        const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\n        map.fitBounds(geojsonLayer.getBounds()); // Ajusta o zoom para se ajustar aos limites do GeoJSON\n      }).catch(error => {\n        console.error('Erro ao carregar o arquivo GeoJSON:', error);\n      });\n    };\n    updateMap();\n\n    // Redimensionar o mapa ao alterar o tamanho da janela\n    window.addEventListener('resize', updateMap);\n    return () => {\n      map.remove();\n      window.removeEventListener('resize', updateMap);\n    };\n  }, [municipio]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    id: \"map\",\n    className: \"map-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 12\n  }, this);\n};\n_s(MapComponent, \"9mn7MMe4fPaZ50ApsOpRWF2HbFg=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","d3","L","jsxDEV","_jsxDEV","normalizeMunicipioName","name","normalize","replace","toLowerCase","MapComponent","municipio","_s","mapRef","console","log","current","map","center","zoom","scrollWheelZoom","zoomControl","areEqualStrings","str1","str2","tileLayer","attribution","addTo","updateMap","geojsonFile","formattedMunicipio","json","then","geojsonData","eachLayer","layer","GeoJSON","removeLayer","geojsonLayer","geoJSON","fitBounds","getBounds","catch","error","window","addEventListener","remove","removeEventListener","ref","id","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Gustavo/Desktop/paineldaterra/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css'; // Importar CSS do Leaflet\r\n\r\n// Função para remover acentuação, espaços e converter para minúsculas\r\nconst normalizeMunicipioName = (name) => {\r\n    return name\r\n        .normalize('NFD') // Normaliza o texto para decompô-lo\r\n        .replace(/[\\u0300-\\u036f]/g, '') // Remove os acentos\r\n        .toLowerCase() // Converte para minúsculas\r\n        .replace(/ /g, '_'); // Substitui espaços por underscores\r\n};\r\n\r\nconst MapComponent = ({ municipio }) => {\r\n    const mapRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        // Inicializar o mapa\r\n        console.log('Container do mapa:', mapRef.current);\r\n\r\n        const map = L.map(mapRef.current, {\r\n            center: [-23.5, -51.5],\r\n            zoom: 7,\r\n            scrollWheelZoom: true,\r\n            zoomControl: true,\r\n        });\r\n\r\n        const areEqualStrings = (str1, str2) => {\r\n            return str1.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase() === \r\n                   str2.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\r\n        };\r\n\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: '© OpenStreetMap contributors',\r\n        }).addTo(map);\r\n\r\n        const updateMap = () => {\r\n            let geojsonFile = '';\r\n            municipio = municipio.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\");\r\n            console.log('Municipio: ', municipio);\r\n            //if (municipio === 'Paraná') {\r\n            if (areEqualStrings(municipio, \"Paraná\")) {\r\n                geojsonFile = '/assets/municipio_escolhaummunicipio.geojson';\r\n            } else {\r\n                const formattedMunicipio = normalizeMunicipioName(municipio);\r\n                geojsonFile = `/assets/municipio_${formattedMunicipio}.geojson`;\r\n            }\r\n            console.log('A carregar:', geojsonFile);\r\n\r\n            d3.json(geojsonFile).then(geojsonData => {\r\n                console.log('Dados GeoJSON carregados:', geojsonData);\r\n\r\n                // Remove o GeoJSON existente antes de adicionar o novo\r\n                map.eachLayer(layer => {\r\n                    if (layer instanceof L.GeoJSON) {\r\n                        map.removeLayer(layer);\r\n                    }\r\n                });\r\n\r\n                const geojsonLayer = L.geoJSON(geojsonData).addTo(map);\r\n                map.fitBounds(geojsonLayer.getBounds()); // Ajusta o zoom para se ajustar aos limites do GeoJSON\r\n            }).catch(error => {\r\n                console.error('Erro ao carregar o arquivo GeoJSON:', error);\r\n            });\r\n        };\r\n\r\n        updateMap();\r\n\r\n        // Redimensionar o mapa ao alterar o tamanho da janela\r\n        window.addEventListener('resize', updateMap);\r\n\r\n        return () => {\r\n            map.remove();\r\n            window.removeEventListener('resize', updateMap);\r\n        };\r\n    }, [municipio]);\r\n\r\n    return <div ref={mapRef} id=\"map\" className=\"map-container\"></div>;\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}